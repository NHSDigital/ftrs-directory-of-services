{
  _type: 'element',
  tags: null,
  links: null,
  viewOf: 'ftrs.etl',
  _stage: 'layouted',
  sourcePath: 'backend/gpIngest/views.c4',
  description: {
    txt: 'A model showing the containers for FtRS GP API.\nAll externally facing APIs are accessed through API-M',
  },
  title: 'Container diagram for GP Ingestion ETL',
  id: 'view_11gvtym',
  autoLayout: {
    direction: 'LR',
    nodeSep: 77,
    rankSep: 70,
  },
  hash: 'bec6740029f1bde408ce624f3099d84ccde3279c',
  bounds: {
    x: 722,
    y: -342,
    width: 1455,
    height: 1569,
  },
  nodes: [
    {
      id: 'ftrs',
      parent: null,
      level: 0,
      children: [
        'ftrs.etl',
        'ftrs.organizationAPI',
        'ftrs.db.orgTable',
      ],
      inEdges: [
        '1gpdfpo',
        '1o4yo45',
      ],
      outEdges: [
        '1vyg0sy',
        'y7tnwn',
        '5gjp3q',
      ],
      title: 'Find the Right Service',
      modelRef: 'ftrs',
      shape: 'rectangle',
      color: 'primary',
      style: {
        opacity: 15,
        size: 'md',
      },
      tags: [],
      kind: 'system',
      depth: 2,
      x: 732,
      y: 26,
      width: 1435,
      height: 893,
      labelBBox: {
        x: 6,
        y: 0,
        width: 143,
        height: 15,
      },
      navigateTo: null,
      links: null,
    },
    {
      id: 'ftrs.etl',
      parent: 'ftrs',
      level: 1,
      children: [
        'ftrs.etl.sourcingEtlProcessor',
        'ftrs.etl.sourcingEtlConsumer',
        'ftrs.etl.sourcingEtlQueue',
      ],
      inEdges: [],
      outEdges: [
        '1vyg0sy',
        'y7tnwn',
        '5gjp3q',
      ],
      title: 'FTRS GP Sourcing ETL',
      modelRef: 'ftrs.etl',
      shape: 'rectangle',
      color: 'primary',
      style: {
        opacity: 15,
        size: 'md',
      },
      description: {
        txt: 'ETL for non API consumer data sources',
      },
      tags: [],
      kind: 'container',
      depth: 1,
      x: 774,
      y: 336,
      width: 1351,
      height: 541,
      labelBBox: {
        x: 6,
        y: 0,
        width: 138,
        height: 15,
      },
      navigateTo: null,
      links: null,
    },
    {
      id: 'ftrs.etl.sourcingEtlProcessor',
      parent: 'ftrs.etl',
      level: 2,
      children: [],
      inEdges: [],
      outEdges: [
        'zvakod',
        '1vyg0sy',
        '5gjp3q',
      ],
      title: 'Sourcing ETL Processor',
      modelRef: 'ftrs.etl.sourcingEtlProcessor',
      shape: 'rectangle',
      color: 'primary',
      icon: 'aws:lambda',
      style: {
        opacity: 15,
        size: 'md',
      },
      description: {
        txt: 'Lambda as ETL Processor',
      },
      tags: [],
      kind: 'lambda',
      x: 816,
      y: 414,
      width: 340,
      height: 180,
      labelBBox: {
        x: 46,
        y: 63,
        width: 278,
        height: 48,
      },
      navigateTo: null,
      links: null,
    },
    {
      id: 'ftrs.etl.sourcingEtlConsumer',
      parent: 'ftrs.etl',
      level: 2,
      children: [],
      inEdges: [],
      outEdges: [
        'f9lh7p',
        'y7tnwn',
      ],
      title: 'Sourcing ETL Consumer',
      modelRef: 'ftrs.etl.sourcingEtlConsumer',
      shape: 'rectangle',
      color: 'primary',
      icon: 'aws:lambda',
      style: {
        opacity: 15,
        size: 'md',
        border: 'none',
      },
      description: {
        txt: 'Dequeues requests and sends to API',
      },
      tags: [],
      kind: 'lambda',
      x: 1710,
      y: 394,
      width: 372,
      height: 180,
      labelBBox: {
        x: 46,
        y: 63,
        width: 310,
        height: 48,
      },
      navigateTo: null,
      links: null,
    },
    {
      id: 'odsService',
      parent: null,
      level: 0,
      children: [],
      inEdges: [
        '1vyg0sy',
      ],
      outEdges: [],
      title: 'ODS Service',
      modelRef: 'odsService',
      shape: 'rectangle',
      color: 'muted',
      style: {
        opacity: 15,
        size: 'md',
      },
      description: {
        txt: 'NHS Digital ODS Service\nSource of truth for Organisation data\nODS FHIR Terminology Server',
      },
      tags: [],
      kind: 'system',
      x: 821,
      y: 1037,
      width: 320,
      height: 180,
      labelBBox: {
        x: 37,
        y: 45,
        width: 247,
        height: 84,
      },
      navigateTo: null,
      links: null,
    },
    {
      id: 'ftrs.etl.sourcingEtlQueue',
      parent: 'ftrs.etl',
      level: 2,
      children: [],
      inEdges: [
        'zvakod',
        'f9lh7p',
      ],
      outEdges: [],
      title: 'Sourcing ETL Queue',
      modelRef: 'ftrs.etl.sourcingEtlQueue',
      shape: 'queue',
      color: 'primary',
      icon: 'aws:simple-queue-service',
      style: {
        opacity: 15,
        size: 'md',
      },
      description: {
        txt: 'Queue for ETL Process',
      },
      tags: [],
      kind: 'sqs',
      x: 1302,
      y: 663,
      width: 330,
      height: 172,
      labelBBox: {
        x: 56,
        y: 59,
        width: 258,
        height: 48,
      },
      navigateTo: null,
      links: null,
    },
    {
      id: 'apim',
      parent: null,
      level: 0,
      children: [
        'apim.dosIngressProxy',
        'apim.dosSearchProxy',
      ],
      inEdges: [
        'y7tnwn',
        '5gjp3q',
      ],
      outEdges: [
        '1gpdfpo',
        '1o4yo45',
      ],
      title: 'NHSE API Management',
      modelRef: 'apim',
      shape: 'rectangle',
      color: 'muted',
      icon: 'gcp:apigee-api-platform',
      style: {
        opacity: 15,
        size: 'md',
      },
      description: {
        txt: 'API Management Function',
      },
      tags: [],
      kind: 'system',
      depth: 1,
      navigateTo: 'view_1hiaxnf',
      x: 765,
      y: -332,
      width: 1338,
      height: 284,
      labelBBox: {
        x: 6,
        y: 0,
        width: 139,
        height: 15,
      },
      links: null,
    },
    {
      id: 'apim.dosIngressProxy',
      parent: 'apim',
      level: 1,
      children: [],
      inEdges: [
        'y7tnwn',
      ],
      outEdges: [
        '1gpdfpo',
      ],
      title: 'Directory of Services - Ingress API',
      modelRef: 'apim.dosIngressProxy',
      shape: 'rectangle',
      color: 'primary',
      icon: 'gcp:apigee-api-platform',
      style: {
        opacity: 15,
        size: 'md',
      },
      description: {
        txt: 'Proxy to write data to DoS',
      },
      tags: [],
      kind: 'apigeeproxy',
      x: 1631,
      y: -270,
      width: 429,
      height: 180,
      labelBBox: {
        x: 46,
        y: 63,
        width: 368,
        height: 48,
      },
      navigateTo: null,
      links: null,
    },
    {
      id: 'apim.dosSearchProxy',
      parent: 'apim',
      level: 1,
      children: [],
      inEdges: [
        '5gjp3q',
      ],
      outEdges: [
        '1o4yo45',
      ],
      title: 'Directory of Services - Search API',
      modelRef: 'apim.dosSearchProxy',
      shape: 'rectangle',
      color: 'primary',
      icon: 'gcp:apigee-api-platform',
      style: {
        opacity: 15,
        size: 'md',
      },
      description: {
        txt: 'Proxy to read data from DoS',
      },
      tags: [],
      kind: 'apigeeproxy',
      x: 807,
      y: -272,
      width: 427,
      height: 180,
      labelBBox: {
        x: 46,
        y: 63,
        width: 366,
        height: 48,
      },
      navigateTo: null,
      links: null,
    },
    {
      id: 'ftrs.organizationAPI',
      parent: 'ftrs',
      level: 1,
      children: [],
      inEdges: [
        '1gpdfpo',
        '1o4yo45',
      ],
      outEdges: [
        '1povied',
      ],
      title: 'Organization API',
      modelRef: 'ftrs.organizationAPI',
      shape: 'rectangle',
      color: 'primary',
      icon: 'aws:lambda',
      style: {
        opacity: 15,
        size: 'md',
      },
      description: {
        txt: '/organization\nAPI for CRUD operations on the Organizations table\nand to retrieve data for the Organization dashboard',
      },
      tags: [],
      kind: 'lambda',
      navigateTo: 'view_vj2u66',
      x: 1084,
      y: 86,
      width: 337,
      height: 180,
      labelBBox: {
        x: 46,
        y: 27,
        width: 276,
        height: 120,
      },
      links: null,
    },
    {
      id: 'ftrs.db.orgTable',
      parent: 'ftrs',
      level: 1,
      children: [],
      inEdges: [
        '1povied',
      ],
      outEdges: [],
      title: 'Organizations',
      modelRef: 'ftrs.db.orgTable',
      shape: 'storage',
      color: 'primary',
      icon: 'aws:dynamo-db',
      style: {
        opacity: 15,
        size: 'md',
      },
      description: {
        txt: 'Organization table',
      },
      tags: [],
      kind: 'component',
      x: 1516,
      y: 88,
      width: 320,
      height: 180,
      labelBBox: {
        x: 82,
        y: 63,
        width: 186,
        height: 48,
      },
      navigateTo: null,
      links: null,
    },
  ],
  edges: [
    {
      id: 'zvakod',
      source: 'ftrs.etl.sourcingEtlProcessor',
      target: 'ftrs.etl.sourcingEtlQueue',
      label: '4. Messages sent to',
      points: [
        [
          1184,
          674,
        ],
        [
          1283,
          661,
        ],
        [
          1408,
          644,
        ],
        [
          1507,
          631,
        ],
      ],
      parent: 'ftrs.etl',
      relations: [
        '1q2okev',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
      navigateTo: null,
      tags: null,
      labelBBox: {
        x: 1201,
        y: 590,
        width: 129,
        height: 18,
      },
      controlPoints: [
        {
          x: 1226,
          y: 626,
        },
      ],
    },
    {
      id: 'f9lh7p',
      source: 'ftrs.etl.sourcingEtlConsumer',
      target: 'ftrs.etl.sourcingEtlQueue',
      label: '5. Dequeue messages from',
      points: [
        [
          1200,
          486,
        ],
        [
          1296,
          510,
        ],
        [
          1413,
          540,
        ],
        [
          1508,
          563,
        ],
      ],
      parent: 'ftrs.etl',
      relations: [
        '1qexp1a',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
      navigateTo: null,
      tags: null,
      labelBBox: {
        x: 1675,
        y: 621,
        width: 176,
        height: 18,
      },
      controlPoints: [
        {
          x: 1693,
          y: 611,
        },
        {
          x: 1657,
          y: 633,
        },
        {
          x: 1634,
          y: 647,
        },
      ],
    },
    {
      id: '1vyg0sy',
      source: 'ftrs.etl.sourcingEtlProcessor',
      target: 'odsService',
      label: '1. Extracts updated ods data for a date \nfrom',
      points: [
        [
          1184,
          773,
        ],
        [
          1285,
          819,
        ],
        [
          1413,
          876,
        ],
        [
          1514,
          921,
        ],
      ],
      parent: null,
      relations: [
        '1pnlft9',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
      navigateTo: null,
      tags: null,
      labelBBox: {
        x: 987,
        y: 678,
        width: 245,
        height: 34,
      },
      controlPoints: [
        {
          x: 982,
          y: 965,
        },
      ],
    },
    {
      id: 'y7tnwn',
      source: 'ftrs.etl.sourcingEtlConsumer',
      target: 'apim.dosIngressProxy',
      label: '6. Writes Organisation updates to',
      points: [
        [
          828,
          478,
        ],
        [
          737,
          491,
        ],
        [
          625,
          500,
        ],
        [
          526,
          487,
        ],
        [
          513,
          485,
        ],
        [
          501,
          483,
        ],
        [
          488,
          481,
        ],
      ],
      parent: null,
      relations: [
        '1oapmrj',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
      navigateTo: null,
      tags: null,
      labelBBox: {
        x: 1881,
        y: 100,
        width: 212,
        height: 18,
      },
      controlPoints: [
        {
          x: 1899,
          y: 265,
        },
        {
          x: 1889,
          y: 109,
        },
      ],
    },
    {
      id: '5gjp3q',
      source: 'ftrs.etl.sourcingEtlProcessor',
      target: 'apim.dosSearchProxy',
      label: '2. Gets ODS UUID via',
      points: [
        [
          844,
          648,
        ],
        [
          806,
          629,
        ],
        [
          770,
          603,
        ],
        [
          748,
          568,
        ],
        [
          734,
          547,
        ],
        [
          754,
          365,
        ],
        [
          740,
          345,
        ],
        [
          681,
          262,
        ],
        [
          580,
          217,
        ],
        [
          486,
          191,
        ],
      ],
      parent: null,
      relations: [
        '1ba6lt6',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
      navigateTo: null,
      tags: null,
      labelBBox: {
        x: 912,
        y: 160,
        width: 143,
        height: 18,
      },
      controlPoints: [
        {
          x: 971,
          y: 374,
        },
        {
          x: 911,
          y: 188,
        },
        {
          x: 967,
          y: -18,
        },
      ],
    },
    {
      id: '1gpdfpo',
      source: 'apim.dosIngressProxy',
      target: 'ftrs.organizationAPI',
      label: 'Routes requests to',
      points: [
        [
          477,
          427,
        ],
        [
          586,
          428,
        ],
        [
          703,
          419,
        ],
        [
          740,
          382,
        ],
        [
          757,
          364,
        ],
        [
          733,
          290,
        ],
        [
          748,
          270,
        ],
        [
          770,
          239,
        ],
        [
          802,
          217,
        ],
        [
          836,
          201,
        ],
      ],
      parent: null,
      relations: [
        '1rbws21',
        'f1831h',
        'jlz3c4',
        '137d55f',
        '5qgvlm',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
      navigateTo: null,
      tags: null,
      labelBBox: {
        x: 1482,
        y: -6,
        width: 122,
        height: 18,
      },
      controlPoints: [
        {
          x: 1574,
          y: -19,
        },
        {
          x: 1410,
          y: 5,
        },
        {
          x: 1312,
          y: 63,
        },
      ],
    },
    {
      id: '1o4yo45',
      source: 'apim.dosSearchProxy',
      target: 'ftrs.organizationAPI',
      label: '3. Reads Organisation data from',
      points: [
        [
          477,
          159,
        ],
        [
          590,
          159,
        ],
        [
          727,
          159,
        ],
        [
          835,
          159,
        ],
      ],
      parent: null,
      relations: [
        'gk1w5k',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
      navigateTo: null,
      tags: null,
      labelBBox: {
        x: 1083,
        y: -80,
        width: 206,
        height: 18,
      },
      controlPoints: [
        {
          x: 1144,
          y: 8,
        },
      ],
    },
    {
      id: '1povied',
      source: 'ftrs.organizationAPI',
      target: 'ftrs.db.orgTable',
      label: '[...]',
      points: [
        [
          1182,
          159,
        ],
        [
          1283,
          159,
        ],
        [
          1411,
          159,
        ],
        [
          1512,
          159,
        ],
      ],
      parent: 'ftrs',
      relations: [
        'hc2j5z',
        'ci3tux',
        '168sipy',
        '1evrf87',
        '52wsmf',
      ],
      color: 'gray',
      line: 'dashed',
      head: 'normal',
      navigateTo: null,
      tags: null,
      labelBBox: {
        x: 1461,
        y: 155,
        width: 25,
        height: 18,
      },
      controlPoints: [
        {
          x: 1465,
          y: 178,
        },
      ],
    },
  ],
  _layout: 'manual',
}
